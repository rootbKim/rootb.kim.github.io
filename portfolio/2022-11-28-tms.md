---
layout: post
title: 이기종 멀티 로봇 관제를 위한 Traffic Management Server(TMS) 개발
feature-img: "/assets/img/portfolio/tms/tms.jpg"
img: "/assets/img/portfolio/tms/tms.jpg"
date: 28 November 2022
excerpt: 실내 배송 로봇 간의 교통을 관리하는 Traffic Management System의 개발 프로젝트이다.
---

# 개요

같은 공간 내에서 로봇 간의 교통을 관리하고, 로봇의 데이터를 관리하는 교통 관리 시스템을 설계하고 구현한 프로젝트이다.

# 프로젝트 기간

2022-11-28 ~ 2024-01-31

# 개발 참여 인원 / 담당 역할

6명 / 로봇 서버 관리 및 회피/우선순위 로직 개발

# 기술 스택

- Multi Robots
- ROS2(galactic)
- Nav2
- postgresql

# 세부 내용

### 시스템 아키텍처 설계

* 다수의 이기종 로봇을 하나의 시스템에서 교통관리할 수 있는 시스템 아키텍처를 구축하였다.
* 시스템의 기능에 따라 로봇 데이터 관리 모듈, 회피, 우선순위, 양보, 줄서기와 같은 모듈로 세분화하고 그 기능을 정의하였다.
* 각 모듈이 각각의 교통관리 기능을 수행하며, 각 상황에 맞게 로봇 간의 교통을 정리한다.
* 이를 위해 각자의 모듈은 로봇과 통신해야 하는 인터페이스를 설계하고, 또한 각 모듈 간의 인터페이스를 설계하였다.

### 로봇 등록 및 상태정보 관리

* 로봇을 시스템에서 제어하기 위하여, 로봇을 DB에 등록하고, 등록된 로봇과 시스템 간의 청약 상태를 관리하였다.
* 이를 위한 로봇의 등록 시퀀스, 맵 등록 시퀀스 등의 로봇이 가지고 있는 데이터를 시스템에 등록하기 위한 시퀀스를 설계하였다.
* 각 로봇이 시스템에 등록 확인을 하기 위한 시퀀스를 설계하였다.
* 이기종 로봇의 메타정보를 관리하기 위하여 DB에 로봇의 모델 정보를 등록하고, 이에 따라 로봇을 구분하고 메타정보를 사용하도록 하였다.
* 이기종 로봇이 같은 공간을 사용하더라도 다른 맵을 사용할 수 있기 때문에, 이에 대한 좌표 변환 관계 모듈을 이용하고, 이에 대한 각 모델별 맵 정보, 변환 관계 정보를 정의하고 관리하도록 하였다.

### 로봇 간 회피 및 우선순위 관리

* 교통관리 기능 중 하나인 로봇 간 회피 관리 모듈을 개발하였다.
* 회피의 기본 기능으로 ROS2 Navigation을 사용하는 경우 앞서 개발한 Social Layer를 사용하여 로봇 간 회피를 할 수 있도록 유도하였다.
* Social Layer만으로 회피 기능을 수행할 수 없는 경우도 있는데, Stop & GO 방식으로 로봇 간의 회피를 수행하였다.
* 로봇 간의 회피가 불가능한 경우 이를 판단하여, 로봇이 양보할 수 있는 위치를 찾을 수 있도록 하는 양보 모듈로 이관하도록 하였다.
* 로봇 간 우선순위를 판단해야하는 경우 이를 사용자가 미리 정의한 우선순위대로 로봇 간의 우선순위를 판단해주는 우선순위 모듈을 개발하였다.

### Conclusion

* 이 프로젝트를 통하여, 시스템 아키텍처를 설계하고, 인터페이스를 설계하는 과정부터, 이를 구현하고, 실제 환경에 구축하고, 검증하고 고도화/안정화를 경험할 수 있었다.
* 로봇의 등록, 이기종 관리 등을 위한 DB를 이용하고, 시스템 내에서 로봇의 데이터를 관리하는 모듈을 개발할 수 있었다.
* 로봇 간의 회피/우선순위 관리 모듈을 위한 아이디어를 제시하고 이를 이용하여 교통관리 기능을 성공적으로 수행할 수 있었다.