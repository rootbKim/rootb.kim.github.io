---
layout: note_page
title: vi 에디터
tags: [Linux]
category: "Dev"
---

리눅스에서 터미널에서 사용할 수 있는 에디터로 vi 에디터가 있다. vi 에디터는 많은 기능을 제공하지만 그만큼 처음 사용하는 사람에게는 번거로울 수 있다. 하지만 vi 에디터의 많은 기능을 능숙하게 사용할 수 있게 된다면 빠른 속도로 유용하게 텍스트를 편집할 수 있게 될 것이다.

## vi 에디터

vi 에디터는 유닉스 시스템에 기본으로 설치되는 에디터로, vim 이란 기본 vi 에디터를 기능 개선 및 확장한 툴도 있지만, vim의 설치와 사용 방법은 나중에 다루고, 여기서는 vi 에디터의 기본 사용 방법에 대해서 다루고자 한다.

다음의 명령어로 vi 에디터를 실행하면 vi 에디터가 실행되는 것을 볼 수 있다.

```bash
vi
```

<img src="/assets/img/posts/230127_vi.png">

그리고 특정한 문서를 열거나, 새로운 문서를 만들 때는 다음과 같이 명령하면 된다.

```bash
vi [TEXT_NAME].txt
```

`[TEXT_NAME].txt` 파일이 있다면 해당 문서를 열고, 만약 해당 파일이 없다면 해당 위치에 `[TEXT_NAME].txt` 라는 이름으로 새로운 문서를 만들고 에디터가 실행될 것이다.

## vi 에디터 모드

vi는 세 가지의 모드를 가진다.

- `명령 모드`: vi를 실행시켰을 때 가장 먼저 실행되는 모드로, 커서의 이동, 수정, 삭제, 복사 붙이기, 탐색 등을 할 수 있다.
- `입력 모드`: `명령 모드`에서 입력 모드 전환 키인 `i`, `I`, `a`, `A`, `o`, `O` 등을 입력하면 `입력 모드`로 전환된다. 입력 모드에서는 자유롭게 텍스트 편집이 가능하다. 다시 `명령 모드`로 돌아가고 싶은 경우에는 `ESC`를 사용한다.
- `ex 명령 모드`: `명령 모드`에서 `:`키를 입력했을 때 수행 되는 모드로, 저장, 종료, 탐색, 치환 및 vi 환경 설정 등을 수행할 수 있는 모드이다.

## vi 명령어

vi 에디터에서 사용되는 명령어는 `명령 모드` 또는 `ex 명령 모드` 에서 사용되는 명령으로, `입력 모드`에서는 명령이 불가능하므로, `ESC`를 이용하여 `명령 모드`로 빠져나와서 사용한다.

### 1. 입력 모드 전환 명령어

`명령 모드`에서 `입력 모드`로 전환할 때 사용하는 명령어는 다음과 같으며, 사용자마다 다르겠지만 주로 `i`와 `a` 명령어를 많이 사용한다.

- `i`: 현재 커서의 위치에서 입력
- `I`: 현재 커서의 위치 줄의 맨 앞에서 입력
- `a`: 현재 커서 다음 위치에서 입력
- `A`: 현재 커서의 위치 줄의 맨 뒤에서 입력
- `o`: 현재 커서 다음 줄에 입력
- `O`: 현재 커서 이전 줄에 입력
- `s`: 현재 커서 위치 글자를 지우고 입력
- `S`: 현재 커서 위치 줄을 지우고 입력

### 2. 커서 이동 명령어

가장 먼저 키 이동이 있다. 키 이동은 키보드의 방향키로도 이동이 가능하지만, 다음의 키로도 방향 키 처럼 이동시킬 수 있다. 해당 명령어는 키보드의 방향키가 없었을 때 개발된 기능이라고 한다.

- `h`: 왼쪽으로 한 칸 이동
- `j`: 아래로 한 칸 이동
- `k`: 위로 한 칸 이동
- `l`: 오른쪽으로 한 칸 이동

키 이동 명령어로 한 칸 씩 이동하는 것 말고 다른 이동 방법 또한 존재한다.

- `w`: 다음 단어의 처음으로 이동
- `b`: 이전 단으의 처음으로 이동
- `^`: 줄의 첫 문자로 이동
- `$`: 줄의 맨 끝 문자로 이동
- `gg`: 제일 첫 행으로 이동
- `G`: 제일 끝 행으로 이동
- `H`: 화면의 첫 줄로 이동
- `M`: 화면의 중간으로 이동
- `L`: 화면의 끝 줄로 이동
- `ctrl`+`f`: 다음 페이지로 이동
- `ctrl`+`b`: 이전 페이지로 이동
- `:라인수` : `라인수`에 해당하는 줄로 이동

### 3. 편집 명령어

편집 명령어는 `입력 모드`가 아닌 `명령 모드`에서 텍스트를 편집하기 위한 명령어이다.

- `v`: 블록 지정 상태가 되며, 커서 이동을 하면 현재 위치에서 이동된 위치까지 블록 지정이 된다. `v`를 다시 한번 명령하면 블록 지정이 해제된다.
- `V`: 라인 단위로 지정상태가 된다.
- `y`: 지정된 블록을 복사
- `yy`: 커서가 있는 라인 복사
- `yw`: 커서를 기준으로 뒤에 있는 단어 복사
- `yb`: 커서를 기준으로 앞에 있는 단어 복사
- `p`: 복사된 내용을 현재 커서 다음에 붙여넣기
- `P`: 복사된 내용을 현재 커서 이전에 붙여넣기
- `x`: 현재 커서위치 또는 지정된 블록을 삭제
- `X`: 현재 커서 이전의 위치를 삭제
- `dd`: 커서의 현재 줄을 삭제
- `dw`: 커서를 기준으로 뒤에 있는 단어 삭제
- `db`: 커서를 기준으로 앞에 있는 단어 삭제
  - 명령어로 삭제된 내용은 `p` 명령어로 붙여넣기가 가능
- `u`: 변경 사항을 되돌리는 것으로, 이전으로 되돌리는 상태가 되거나, 최신 상태로 되돌리는 상태로 바꾼다.
- `ctrl`+`r`: 변경 상태를 되돌리는 것으로, `u`로 설정된 상태에 따라 해당 명령을 실행할 때마다 이전으로 돌아가거나, 최신 상태로 돌아간다.

> `yy`, `yw`, `yb`, `dd`, `dw`, `db` 명령어는 명령어 앞에 숫자를 지정하면 그 숫자만큼 해당 명령어를 수행한다. 예를 들어, `2yy`는 현재 위치로부터 두 개의 줄을 복사한다.

### 4. 찾기 및 바꾸기

문자열을 찾기 위해서는 `/`와 `?`를 활용한다.

- `/문자열`: 커서가 위치한 곳부터 아래방향으로 `문자열`을 검색
- `?문자열`: 커서가 위치한 곳부터 윗방향으로 `문자열`을 검색
- `n`: 찾은 문자 중에서 다음 문자로 이동
- `N`: 찾은 문자 중에서 이전 문자로 이동

다음은 문자열을 바꾸기 위한 명령어이다.

- `:%s/old/new`: 각 행의 처음 나오는 `old`를 찾아 `new`로 바꾼다. 즉, 두 번째 부터 나오는 `old`는 바뀌지 않는다.
- `:%s/old/new/g`: 모든 `old`를 `new`로 바꾼다.
- `:%s/old/new/gc`: 모든 `old`를 `new`로 바꾸기 전에 어떤 명령을 수행할 것인지 물어본다.

### 5. 저장 및 종료

명령 모드에서 `:`을 입력하여 `ex 명령 모드` 상태에서 사용되는 저장 및 종료 명령이다.

- `:q`: 종료
- `:q!`: 저장하지 않고 강제 종료
- `:w`: 저장
- `:wq`: 저장 후 종료
  - `ZZ`: 저장 후 종료. `:wq`와 같은 명령어로, `명령 모드`에서 사용할 수 있다.
- `:wq 파일이름`: 저장 후 파일 이름 지정

## 유용한 기능

vi 에디터를 사용하면서 자주 사용되는 기능이다.

- `:set number`, `:set nu`: 행 번호를 출력
- `:set nonumber`, `:set nonu`: 행 번호를 숨김
- `:cd`: 현재 디렉토리를 출력

## 참고문헌

- [[리눅스,유닉스] vi (vim) 편집기 기본 사용법, 명령어, 단축키, 동작법 & 문제](https://jhnyang.tistory.com/54)
- [[Linux] vi 편집기 사용법 및 명령어](https://velog.io/@zeesoo/Linux-vi-%ED%8E%B8%EC%A7%91%EA%B8%B0-%EC%82%AC%EC%9A%A9%EB%B2%95-%EB%B0%8F-%EB%AA%85%EB%A0%B9%EC%96%B4)
